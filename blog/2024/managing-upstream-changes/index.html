<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>GitHub - Managing upstream changes. | emdeh</title> <meta name="author" content=" "> <meta name="description" content="An overview of how to manage upstream changes in a GitHub repository"> <meta name="keywords" content="cybersecurity, ai, technology cyber"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link href="/assets/css/bootstrap-toc.min.css?6f5af0bb9aab25d79b2448143cbeaa88" rel="stylesheet"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%91%A8%E2%80%8D%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://emdeh.github.io/blog/2024/managing-upstream-changes/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-JZNPNDMG9P"></script> <script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JZNPNDMG9P");</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/">emdeh</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog<span class="sr-only">(current)</span></a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">Repositories</a> </li> <li class="nav-item "> <a class="nav-link" href="/library/">Library</a> </li> <li class="nav-item dropdown "> <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">submenus</a> <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown"> <a class="dropdown-item" href="/blog/category/htb-machines">HTB-Machines</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/blog/category/essential-eight/">Essential Eight</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/blog/category/artificial-intelligence/">Artificial Intelligence</a> <div class="dropdown-divider"></div> <a class="dropdown-item" href="/blog/category/explainers/">Explainers</a> </div> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fas fa-moon"></i> <i class="fas fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="row"> <div class="col-sm-3"> <nav id="toc-sidebar" class="sticky-top"></nav> </div> <div class="col-sm-9"> <div class="post"> <header class="post-header"> <h1 class="post-title">GitHub - Managing upstream changes.</h1> <p class="post-meta">February 19, 2024</p> <p class="post-tags"> <a href="/blog/2024"> <i class="fas fa-calendar fa-sm"></i> 2024 </a>   ·   <a href="/blog/tag/upstream-changes"> <i class="fas fa-hashtag fa-sm"></i> upstream-changes</a>   <a href="/blog/tag/git"> <i class="fas fa-hashtag fa-sm"></i> git</a>   <a href="/blog/tag/github"> <i class="fas fa-hashtag fa-sm"></i> github</a>   <a href="/blog/tag/git-pull"> <i class="fas fa-hashtag fa-sm"></i> git-pull</a>   <a href="/blog/tag/git-fetch"> <i class="fas fa-hashtag fa-sm"></i> git-fetch</a>     ·   <a href="/blog/category/explainers"> <i class="fas fa-tag fa-sm"></i> Explainers</a>   </p> </header> <article class="post-content"> <div id="markdown-content"> <h1 id="introduction">Introduction</h1> <p>When a GitHub repository is forked, it can maintain a connection with original codebase. The original is called the <strong>upstream</strong> repository or branch. This connection means that the forked repository can be modified as needed, but if there are also changes made to the original, such as new features, they can be integrated into the forked version.</p> <p>This article outlines the steps to pull changes from an upstream repository into forked version. Specifically, it outlines how to pull changes into a separate branch for testing and then how to <strong>merge</strong> those changes into the main branch of the fork after testing and resolving any conflicts.</p> <h2 id="high-level-workflow-for-merging-upstream-changes">High-level workflow for Merging Upstream Changes:</h2> <ol> <li> <p><strong>Creating a New Branch:</strong> When there are upstream changes to merge, create a new branch in the forked repository based on the main branch.</p> </li> <li> <p><strong>Pulling Upstream Changes:</strong> Pull the changes from the upstream repository into this new branch. Resolve any conflicts here.</p> </li> <li> <p><strong>Testing:</strong> Use this branch to test the deployment to ensure everything works as expected. For example, if it’s a website, run it locally from the new branch or if it’s a deployment, deploy from the branch to confirm everything is in order.</p> </li> <li> <p><strong>Creating a Pull Request:</strong> Once the branch with the upstream changes has been tested, create a pull request to merge this branch into the main branch. The Pull Request can be drafted during testing if necessary.</p> </li> <li> <p><strong>Review and Merge:</strong> Review the Pull Request in GitHub. After any neccessary approvals, merge the pull request.</p> </li> <li> <p><strong>Delete the Branch:</strong> After the merge, the branch used to test the upstream changes can be deleted.</p> </li> </ol> <h2 id="prerequisites">Prerequisites</h2> <ul> <li>Ensure Git is installed on the system.</li> <li>Ensure access to the repository and its upstream repository.</li> </ul> <h1 id="steps">Steps</h1> <h2 id="1-navigate-to-the-local-repo">1. Navigate to the local repo</h2> <h2 id="2-update-the-local-main-branch">2. Update the local main branch</h2> <p>Ensure the local <code class="language-plaintext highlighter-rouge">main</code> branch (or whichever branch will ultimately receive the tested upstream changes) is up to date with the remote repository.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout main <span class="c"># Checkout the local copy of the main branch</span>
git pull origin main <span class="c"># Pull remote changes into the local copy of the main branch</span>
</code></pre></div></div> <h2 id="3-fetch-changes-from-upstream-repository">3. Fetch changes from upstream repository</h2> <p>Fetch changes from the upstream repository without merging them.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git fetch upstream
</code></pre></div></div> <h2 id="4-create-a-new-branch-for-testing-the-upstream-changes">4. Create a new branch for testing the upstream changes</h2> <p>Create a new branch based on the <code class="language-plaintext highlighter-rouge">main</code> branch to test the upstream changes.</p> <blockquote> <p><strong><em>This is important, as it protects the stability of the branch from which the code is deployed.</em></strong></p> </blockquote> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout <span class="nt">-b</span> upstream-changes main <span class="c"># Create a new branch called upstream-changes based off the main branch</span>
</code></pre></div></div> <h2 id="5-merge-upstream-changes-into-the-new-branch">5. Merge upstream changes into the new branch</h2> <p>Merge the changes from the upstream repository into the new branch.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git merge upstream/main
</code></pre></div></div> <h3 id="resolving-merge-conflicts">Resolving merge conflicts</h3> <p>If there are merge conflicts, Git will pause the merge process and mark the files that have conflicts. Here is how to resolve them:</p> <ul> <li>Open the conflicted files in VS Code.</li> <li>Look for the areas marked as conflicts (usually indicated by <code class="language-plaintext highlighter-rouge">&lt;&lt;&lt;&lt;&lt;&lt;</code>, <code class="language-plaintext highlighter-rouge">======</code>, and <code class="language-plaintext highlighter-rouge">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</code>).</li> <li>Manually edit the files to resolve the conflicts. Choose which changes to keep or combine as needed.</li> <li>After resolving conflicts, add the files to staging: <code class="language-plaintext highlighter-rouge">git add .</code> </li> <li>Then, continue the merge process: <code class="language-plaintext highlighter-rouge">git merge --continue</code> </li> <li>Once all conflicts are resolved and the merge is successful, proceed with the next steps.</li> </ul> <h2 id="6-push-the-new-branch-to-github">6. Push the new branch to Github</h2> <p>It’s good practice to push the newly created branch with the upstream changes to the remote repository.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git push origin upstream-changes
</code></pre></div></div> <h2 id="7-open-a-pull-request-in-github">7. Open a Pull Request in GitHub</h2> <p>Now the Pull Request can be opened in draft.</p> <blockquote> <p><em>Be careful that the Pull Request is proposing to pull the <code class="language-plaintext highlighter-rouge">upstream-changes</code> branch into your own <code class="language-plaintext highlighter-rouge">main</code> branch, and <strong>*not</strong></em> the <code class="language-plaintext highlighter-rouge">main</code> branch of the upstream repository.*</p> </blockquote> <ul> <li>Go to the repository in GitHub.</li> <li>Open a Pull Request for the <code class="language-plaintext highlighter-rouge">upstream-changes</code> branch against the <code class="language-plaintext highlighter-rouge">main</code> branch.</li> <li>This usually initiates any review process.</li> </ul> <blockquote> <p><em>Do not merge it yet.</em></p> </blockquote> <h2 id="8-deploy-the-test-branch">8. Deploy the Test branch</h2> <p>Deploy or run the <code class="language-plaintext highlighter-rouge">upstream-changes</code> branch locally, or undertake whatever steps required to confirm the changes.</p> <h2 id="9-review-and-merge-the-pull-request">9. Review and merge the pull request</h2> <p>If the tests are successful, merge the changes into main by merging the pull request into the <code class="language-plaintext highlighter-rouge">main</code> branch through the GitHub interface.</p> <h3 id="when-to-use-merge-commit">When to use Merge Commit</h3> <p>Opt for a merge commit when you want to preserve the exact history of changes, including the individual commits, from a feature branch without altering the commit history. This approach is beneficial when you want to maintain a visual representation of the feature branch within the main branch, making it easier to track and understand the flow of changes. It’s especially useful for complex features or significant changes that involve multiple developers or require detailed historical context for future reference.</p> <p>The merge commit approach adds a new commit to the main branch that “merges” the histories, ensuring that the main branch’s history reflects the addition of the feature or changes from the feature branch as a merge. This method keeps the history of both branches intact and provides a clear merge point that can be referenced in the future</p> <blockquote> <p><em>If Linear History is on and the branch being being merged into is protected, the only options may be <strong>Rebase</strong> or <strong>Squash</strong>.</em></p> </blockquote> <h3 id="when-to-use-rebase">When to use Rebase</h3> <p>Use this when you want to maintain a detailed commit history from the feature/test branch in the main branch. It’s suitable for code changes where each commit’s history is important for context, such as new features or significant code revisions.</p> <h3 id="when-to-use-squash">When to use Squash</h3> <p>Opt for this when dealing with a series of minor or incremental changes, such as documentation updates or small tweaks. It combines all feature branch commits into a single commit for a cleaner main branch history, making it ideal for simpler or less impactful changes.</p> <h2 id="10-update-the-local-main-branch-and-clean-up">10. Update the local main branch and clean up</h2> <p>After merging the pull request, update the local <code class="language-plaintext highlighter-rouge">main</code> branch and then delete the test branch.</p> <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git checkout main <span class="c"># Switch back to the main branch</span>
git pull origin main <span class="c"># Pull the remote version of main to the local copy so it is up-to-date with the recent merge</span>
git branch <span class="nt">-d</span> upstream-changes <span class="c"># Delete the local copy of the branch used to test the upstream changes</span>
git push origin <span class="nt">--delete</span> upstream-changes <span class="c"># Delete the remote copy of the branch used to test the upstream changes</span>
</code></pre></div></div> <h2 id="11-redeploy-from-main">11. Redeploy from main</h2> <p>If required, it’s good practice to now re-deploy the codebase from the <code class="language-plaintext highlighter-rouge">main</code> branch.</p> <h1 id="conclusion">Conclusion</h1> <p>This process ensures that changes from the upstream repository are tested in isolation before being integrated into the main branch, minimising the risk of disruption to the main codebase.</p> <h5 id="a-quick-note-on-git-fetch-vs-git-pull">A quick note on <code class="language-plaintext highlighter-rouge">Git Fetch</code> vs. <code class="language-plaintext highlighter-rouge">Git Pull</code> </h5> <p>In Git, both <code class="language-plaintext highlighter-rouge">git fetch</code> and <code class="language-plaintext highlighter-rouge">git pull</code> are commands used to update local copies of a repository from a remote source. However, they serve different purposes and operate in distinct ways.</p> <ul> <li> <p><strong><code class="language-plaintext highlighter-rouge">git fetch</code></strong> retrieves updates from a remote repository, but it doesn’t automatically merge those updates into the current working branch. When <code class="language-plaintext highlighter-rouge">git fetch upstream</code> is executed, for instance, Git fetches any new work that has been pushed to the upstream repository since the last fetch, updating the local remote-tracking branches (like upstream/main). However, <em>the working directory remains unchanged</em>. This command is useful for reviewing changes before integrating them into the local branch.</p> </li> <li> <p><strong><code class="language-plaintext highlighter-rouge">git pull</code></strong>, on the other hand, is a more aggressive command that not only fetches updates from the remote repository but also automatically merges them into your current working branch. Essentially, <code class="language-plaintext highlighter-rouge">git pull</code> is a combination of <code class="language-plaintext highlighter-rouge">git fetch</code> followed by <code class="language-plaintext highlighter-rouge">git merge</code>. When executed <code class="language-plaintext highlighter-rouge">git pull origin main</code>, Git fetches the changes from the main branch of the remote named origin and immediately attempts to merge them into the current working branch. This command is handy for quickly updating local branches with the latest changes from the remote, assuming they’re ready to be merged without a review process.</p> </li> </ul> <p>In Summary <code class="language-plaintext highlighter-rouge">git fetch</code> is when the changes require review before merging. Use <code class="language-plaintext highlighter-rouge">git pull</code> when integrating the remote changes immediately into the local branch without a preliminary review is not a concern.</p> </div> </article> <br> <hr> <br> <ul class="list-disc pl-8"></ul> <h2 class="text-3xl font-semibold mb-4 mt-12">Enjoy Reading This Article?</h2> <p class="mb-2">Here are some more articles you might like to read next:</p> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/bizness-walkthrough/">Bizness</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/codify-walkthrough/">Codify</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/devvortex-walkthrough/">Devvortex</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2024/essential-eight-application-control/">Application Control</a> </li> <li class="my-2"> <a class="text-pink-700 underline font-semibold hover:text-pink-800" href="/blog/2023/assessment-planning-scoping/">Assessment planning and scoping</a> </li> </div> </div> </div> </div> <footer class="fixed-bottom"> <div class="container mt-0"> © Copyright 2024 . Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="/assets/js/bootstrap-toc.min.js?c82ff4de8b0955d6ff14f5b05eed7eb6"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?c9d9dd48933de3831b3ee5ec9c209cac" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-JZNPNDMG9P"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-JZNPNDMG9P");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>